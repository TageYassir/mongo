{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Saas_MongoDB/mongo/app/uis/user-space/profile/page.js"],"sourcesContent":["\"use client\"\n\n/** React MUI Imports */\nimport { \n  Button, \n  Container, \n  Typography, \n  Box, \n  Avatar, \n  Paper, \n  Tabs, \n  Tab, \n  Grid, \n  Card, \n  CardMedia,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  MenuItem,\n  CircularProgress,\n  IconButton\n} from \"@mui/material\"\n/** React Imports */\nimport { useEffect, useState } from \"react\"\n/** Next Navigation */\nimport { useRouter } from \"next/navigation\"\n/** Icons Imports */\nimport { Settings, PhotoLibrary, Edit } from \"@mui/icons-material\"\n\n// Tab Panel Component\nfunction TabPanel({ children, value, index, ...other }) {\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`profile-tabpanel-${index}`}\n      aria-labelledby={`profile-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ py: 3 }}>{children}</Box>}\n    </div>\n  )\n}\n\n// Safe localStorage parser\nconst getStoredUser = () => {\n  if (typeof window === 'undefined') return null\n  \n  try {\n    const stored = localStorage.getItem('user')\n    if (!stored || stored === 'undefined' || stored === 'null') {\n      return null\n    }\n    return JSON.parse(stored)\n  } catch (error) {\n    console.error('Error parsing stored user:', error)\n    localStorage.removeItem('user')\n    return null\n  }\n}\n\n// Edit Profile Modal Component\nfunction EditProfileModal({ open, onClose, user, onUpdate }) {\n  const [formData, setFormData] = useState({\n    firstName: '',\n    LastName: '',\n    pseudo: '',\n    email: '',\n    gender: '',\n    country: ''\n  })\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState('')\n\n  useEffect(() => {\n    if (user && open) {\n      setFormData({\n        firstName: user.firstName || '',\n        LastName: user.LastName || '',\n        pseudo: user.pseudo || '',\n        email: user.email || '',\n        gender: user.gender || '',\n        country: user.country || ''\n      })\n    }\n  }, [user, open])\n\n  const handleSubmit = async (e) => {\n    e.preventDefault()\n    setLoading(true)\n    setError('')\n\n    try {\n      // Get current user ID from localStorage for the update\n      const currentUser = getStoredUser()\n      if (!currentUser || !currentUser.id) {\n        setError('User not found. Please log in again.')\n        return\n      }\n\n      const updateData = {\n        ...formData,\n        id: currentUser.id // Include user ID for the update\n      }\n\n      const response = await fetch('/api/users?operation=update', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify(updateData)\n      })\n\n      if (response.ok) {\n        const result = await response.json()\n        // Update both state and localStorage\n        const updatedUser = { ...currentUser, ...formData }\n        onUpdate(updatedUser)\n        onClose()\n      } else {\n        const data = await response.json()\n        setError(data.error || 'Failed to update profile')\n      }\n    } catch (err) {\n      setError('Network error. Please try again.')\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleChange = (field) => (e) => {\n    setFormData(prev => ({\n      ...prev,\n      [field]: e.target.value\n    }))\n  }\n\n  return (\n    <Dialog open={open} onClose={onClose} maxWidth=\"sm\" fullWidth>\n      <DialogTitle>Edit Profile</DialogTitle>\n      <form onSubmit={handleSubmit}>\n        <DialogContent>\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, mt: 1 }}>\n            <TextField\n              label=\"First Name\"\n              value={formData.firstName}\n              onChange={handleChange('firstName')}\n              fullWidth\n              required\n            />\n            <TextField\n              label=\"Last Name\"\n              value={formData.LastName}\n              onChange={handleChange('LastName')}\n              fullWidth\n              required\n            />\n            <TextField\n              label=\"Pseudo\"\n              value={formData.pseudo}\n              onChange={handleChange('pseudo')}\n              fullWidth\n              required\n            />\n            <TextField\n              label=\"Email\"\n              type=\"email\"\n              value={formData.email}\n              onChange={handleChange('email')}\n              fullWidth\n              required\n            />\n            <TextField\n              select\n              label=\"Gender\"\n              value={formData.gender}\n              onChange={handleChange('gender')}\n              fullWidth\n            >\n              <MenuItem value=\"Female\">Female</MenuItem>\n              <MenuItem value=\"Male\">Male</MenuItem>\n              <MenuItem value=\"Unspecified\">Unspecified</MenuItem>\n            </TextField>\n            <TextField\n              select\n              label=\"Country\"\n              value={formData.country}\n              onChange={handleChange('country')}\n              fullWidth\n            >\n              <MenuItem value=\"Morocco\">Morocco</MenuItem>\n              <MenuItem value=\"USA\">USA</MenuItem>\n              <MenuItem value=\"Singapore\">Singapore</MenuItem>\n            </TextField>\n          </Box>\n          {error && (\n            <Typography color=\"error\" sx={{ mt: 2 }}>\n              {error}\n            </Typography>\n          )}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={onClose}>Cancel</Button>\n          <Button \n            type=\"submit\" \n            variant=\"contained\" \n            disabled={loading}\n          >\n            {loading ? <CircularProgress size={24} /> : 'Save Changes'}\n          </Button>\n        </DialogActions>\n      </form>\n    </Dialog>\n  )\n}\n\nexport default function ProfilePage() {\n  const router = useRouter()\n  const [currentUser, setCurrentUser] = useState(null)\n  const [tabValue, setTabValue] = useState(0)\n  const [editModalOpen, setEditModalOpen] = useState(false)\n  const [posts, setPosts] = useState([])\n  const [loading, setLoading] = useState(true)\n  const [friendsCount, setFriendsCount] = useState(null)\n\n  // robust friends count helper for current user\n  async function fetchFriendsCountFor(id) {\n    if (!id) return 0\n    const endpoints = [\n      `/api/friends?operation=count&userId=${encodeURIComponent(id)}`,\n      `/api/friends?operation=get-friends&userId=${encodeURIComponent(id)}`,\n      `/api/friends?operation=list&userId=${encodeURIComponent(id)}`,\n      `/api/friends?operation=get&userId=${encodeURIComponent(id)}`,\n      `/api/friends?userId=${encodeURIComponent(id)}`,\n      `/api/users/${encodeURIComponent(id)}/friends`,\n    ]\n    const parseCount = (json) => {\n      if (json == null) return null\n      if (Array.isArray(json)) return json.length\n      const candidates = [\n        json.count,\n        json.total,\n        json.friendsCount,\n        json.totalCount,\n        json.length,\n        json.meta?.total,\n        json.meta?.count,\n        json.data?.length,\n        json.friends?.length,\n        json.items?.length\n      ]\n      for (const c of candidates) {\n        if (typeof c === 'number' && !Number.isNaN(c)) return c\n        if (typeof c === 'string' && !Number.isNaN(Number(c))) return Number(c)\n      }\n      return null\n    }\n    for (const url of endpoints) {\n      try {\n        const res = await fetch(url)\n        if (!res.ok) continue\n        const json = await res.json().catch(() => null)\n        const c = parseCount(json)\n        if (c != null) return c\n      } catch (e) { /* try next */ }\n    }\n    return 0\n  }\n\n  // Load current user\n  useEffect(() => {\n    const loadUser = async () => {\n      try {\n        setLoading(true)\n        \n        // Try to get current user from API first\n        const response = await fetch('/api/users?operation=get-current')\n        \n        if (response.ok) {\n          const data = await response.json()\n          setCurrentUser(data.user)\n          \n          // Update localStorage with valid data\n          if (data.user) {\n            try {\n              localStorage.setItem('user', JSON.stringify(data.user))\n            } catch (storageError) {\n              console.warn('Could not save user to localStorage:', storageError)\n            }\n          }\n        } else {\n          // Fallback to localStorage with safe parsing\n          const storedUser = getStoredUser()\n          if (storedUser) {\n            setCurrentUser(storedUser)\n          }\n        }\n      } catch (error) {\n        console.error('Failed to load user:', error)\n        // Fallback to localStorage with safe parsing\n        const storedUser = getStoredUser()\n        if (storedUser) {\n          setCurrentUser(storedUser)\n        }\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    loadUser()\n  }, [])\n\n  // Fetch friends count for the current user\n  useEffect(() => {\n    const run = async () => {\n      if (!currentUser?._id && !currentUser?.id) return\n      try {\n        const userId = currentUser.__id || currentUser.id\n        const count = await fetchFriendsCountFor(userId)\n        setFriendsCount(typeof count === 'number' ? count : 0)\n      } catch (e) {\n        setFriendsCount(0)\n      }\n    }\n    run()\n  }, [currentUser])\n\n  // Load user's posts\n  useEffect(() => {\n    const loadPosts = async () => {\n      if (!currentUser?._id && !currentUser?.id) return\n      \n      try {\n        const userId = currentUser._id || currentUser.id\n        const response = await fetch(`/api/posts?operation=get-by-user&userId=${userId}`)\n        if (response.ok) {\n          const data = await response.json()\n          setPosts(data.posts || [])\n        }\n      } catch (error) {\n        console.error('Failed to load posts:', error)\n      }\n    }\n\n    loadPosts()\n  }, [currentUser])\n\n  const handleTabChange = (event, newValue) => {\n    setTabValue(newValue)\n  }\n\n  const handleUpdateUser = (updatedUser) => {\n    setCurrentUser(updatedUser)\n    // Update localStorage with safe handling\n    try {\n      localStorage.setItem('user', JSON.stringify(updatedUser))\n    } catch (storageError) {\n      console.warn('Could not update user in localStorage:', storageError)\n    }\n  }\n\n  if (loading) {\n    return (\n      <Container maxWidth=\"md\" sx={{ py: 4, textAlign: 'center' }}>\n        <CircularProgress />\n        <Typography variant=\"body2\" sx={{ mt: 2 }}>\n          Loading profile...\n        </Typography>\n      </Container>\n    )\n  }\n\n  if (!currentUser) {\n    return (\n      <Container maxWidth=\"md\" sx={{ py: 4, textAlign: 'center' }}>\n        <Typography variant=\"h6\">Please log in to view your profile</Typography>\n        <Button \n          variant=\"contained\" \n          sx={{ mt: 2 }}\n          onClick={() => router.push('/uis')}\n        >\n          Go to Login\n        </Button>\n      </Container>\n    )\n  }\n\n  const avatarColor = currentUser.gender === \"Male\" ? '#1976d2' : '#d81b60'\n  const userInitial = (currentUser.pseudo || currentUser.email || '?').charAt(0).toUpperCase()\n\n  return (\n    <Container maxWidth=\"md\" sx={{ py: 3 }}>\n      {/* Header */}\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 3 }}>\n        <Typography variant=\"h4\" sx={{ fontWeight: 600 }}>\n          Profile\n        </Typography>\n        <IconButton onClick={() => router.push('/uis/user-space/settings')}>\n          <Settings />\n        </IconButton>\n      </Box>\n\n      {/* Profile Summary */}\n      <Paper sx={{ p: 3, mb: 3 }}>\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 3, mb: 2 }}>\n          <Avatar\n            sx={{ \n              width: 80, \n              height: 80, \n              bgcolor: avatarColor,\n              fontSize: '2rem'\n            }}\n          >\n            {userInitial}\n          </Avatar>\n          \n          <Box sx={{ flexGrow: 1 }}>\n            <Typography variant=\"h5\" sx={{ fontWeight: 600 }}>\n              {currentUser.pseudo || currentUser.firstName || 'User'}\n            </Typography>\n            <Typography variant=\"body1\" color=\"text.secondary\">\n              {currentUser.firstName} {currentUser.LastName}\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              {currentUser.email}\n            </Typography>\n          </Box>\n\n          <Button\n            variant=\"outlined\"\n            startIcon={<Edit />}\n            onClick={() => setEditModalOpen(true)}\n          >\n            Edit Profile\n          </Button>\n        </Box>\n\n        {/* Stats */}\n        <Box sx={{ display: 'flex', gap: 4, mt: 2 }}>\n          <Box sx={{ textAlign: 'center' }}>\n            <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n              {posts.length}\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Posts\n            </Typography>\n          </Box>\n          <Box sx={{ textAlign: 'center' }}>\n            <Typography variant=\"h6\" sx={{ fontWeight: 600 }}>\n              {friendsCount == null ? 'â€”' : friendsCount}\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\">\n              Friends\n            </Typography>\n          </Box>\n        </Box>\n\n        {/* User Info */}\n        <Box sx={{ mt: 2 }}>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            <strong>Gender:</strong> {currentUser.gender || 'Not specified'}\n          </Typography>\n          <Typography variant=\"body2\" color=\"text.secondary\">\n            <strong>Country:</strong> {currentUser.country || 'Not specified'}\n          </Typography>\n        </Box>\n      </Paper>\n\n      {/* Tabs */}\n      <Paper sx={{ width: '100%' }}>\n        <Tabs\n          value={tabValue}\n          onChange={handleTabChange}\n          variant=\"fullWidth\"\n        >\n          <Tab \n            icon={<PhotoLibrary />} \n            label=\"POSTS\" \n            iconPosition=\"start\"\n          />\n        </Tabs>\n\n        <TabPanel value={tabValue} index={0}>\n          {posts.length === 0 ? (\n            <Box sx={{ textAlign: 'center', py: 4 }}>\n              <PhotoLibrary sx={{ fontSize: 48, color: 'text.secondary', mb: 2 }} />\n              <Typography variant=\"h6\" color=\"text.secondary\">\n                No posts yet\n              </Typography>\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\n                Share your first post to get started!\n              </Typography>\n            </Box>\n          ) : (\n            <Grid container spacing={2}>\n              {posts.map((post, index) => (\n                <Grid item xs={12} sm={6} md={4} key={post._id || index}>\n                  <Card>\n                    <CardMedia\n                      component=\"div\"\n                      sx={{\n                        height: 200,\n                        bgcolor: 'grey.100',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        p: 2\n                      }}\n                    >\n                      <Typography variant=\"body2\" color=\"text.secondary\" align=\"center\">\n                        {post.content || 'Post content'}\n                      </Typography>\n                    </CardMedia>\n                  </Card>\n                </Grid>\n              ))}\n            </Grid>\n          )}\n        </TabPanel>\n      </Paper>\n\n      {/* Edit Profile Modal */}\n      <EditProfileModal\n        open={editModalOpen}\n        onClose={() => setEditModalOpen(false)}\n        user={currentUser}\n        onUpdate={handleUpdateUser}\n      />\n    </Container>\n  )\n}"],"names":[],"mappings":"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","debugId":null}}]
}