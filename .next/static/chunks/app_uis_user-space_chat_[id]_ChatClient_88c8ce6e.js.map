{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Saas_MongoDB/mongo/app/uis/user-space/chat/%5Bid%5D/ChatClient.js"],"sourcesContent":["'use client'\r\n\r\nimport React, { useEffect, useState, useRef, useCallback } from \"react\"\r\nimport { useSearchParams, useParams } from \"next/navigation\"\r\nimport { Box, Typography, Container, TextField, Button, List, ListItem, IconButton, Menu, MenuItem, ListItemIcon, ListItemText } from \"@mui/material\"\r\nimport ImageIcon from \"@mui/icons-material/Image\"\r\nimport MicIcon from \"@mui/icons-material/Mic\"\r\nimport StopIcon from \"@mui/icons-material/Stop\"\r\nimport PlayArrowIcon from \"@mui/icons-material/PlayArrow\"\r\nimport PauseIcon from \"@mui/icons-material/Pause\"\r\nimport VolumeUpIcon from \"@mui/icons-material/VolumeUp\"\r\nimport MoreVertIcon from \"@mui/icons-material/MoreVert\"\r\nimport DownloadIcon from \"@mui/icons-material/Download\"\r\n\r\n/**\r\n * ChatClient\r\n *\r\n * - Restores the previous \"old\" UI layout / look & flow you had originally:\r\n *   header, message list area with simple bubbles, composer fixed to bottom with attach/record/send.\r\n * - Keeps the improved voice-note UI (compact WhatsApp-like pill) with a scrub-able progress bar,\r\n *   play/pause, mute and a three-dot menu â€” matching the vocal style you provided.\r\n * - Keeps image preview, file upload, recording/uploading flow and mobile-friendly touches.\r\n *\r\n * Note: relies on /api/messages and /api/messages/upload similar to your original implementation.\r\n */\r\n\r\nexport default function ChatClient({ receiver: receiverFromServer = null, receiverId: receiverProp = null }) {\r\n  const searchParams = useSearchParams()\r\n  const receiverFromQuery = searchParams ? searchParams.get(\"receiver\") : null\r\n  const params = useParams ? useParams() : {}\r\n  const routeId = params?.id ?? null\r\n  const receiverId = receiverFromServer ? (receiverFromServer._id || receiverFromServer.id || null) : (receiverProp || receiverFromQuery || routeId || null)\r\n\r\n  const [currentUserId, setCurrentUserId] = useState(null)\r\n  const [currentUser, setCurrentUser] = useState(null)\r\n  const [receiver, setReceiver] = useState(receiverFromServer || null)\r\n  const [messages, setMessages] = useState([])\r\n  const [text, setText] = useState(\"\")\r\n  const [sending, setSending] = useState(false)\r\n  const [error, setError] = useState(null)\r\n  const [loadingMessages, setLoadingMessages] = useState(false)\r\n\r\n  // recording state\r\n  const [recording, setRecording] = useState(false)\r\n  const mediaRecorderRef = useRef(null)\r\n  const recordedChunksRef = useRef([])\r\n  const activeStreamRef = useRef(null)\r\n\r\n  // recording timer\r\n  const [recordElapsedMs, setRecordElapsedMs] = useState(0)\r\n  const recordIntervalRef = useRef(null)\r\n  const recordStartRef = useRef(null)\r\n\r\n  // upload state\r\n  const [uploadingAudio, setUploadingAudio] = useState(false)\r\n\r\n  // preview state\r\n  const [previewImageUrl, setPreviewImageUrl] = useState(null)\r\n  const [previewFilename, setPreviewFilename] = useState(null)\r\n\r\n  const messagesEndRef = useRef(null)\r\n  const fileInputRef = useRef(null)\r\n\r\n  useEffect(() => {\r\n    async function loadCurrentUser() {\r\n      try {\r\n        const res = await fetch(\"/api/users?operation=get-current\")\r\n        if (res.ok) {\r\n          const payload = await res.json()\r\n          const uid = payload?.user?._id || payload?.user?.id || payload?.current?.id || payload?.id || null\r\n          if (uid) {\r\n            setCurrentUserId(uid)\r\n            try {\r\n              const r2 = await fetch(`/api/users/${encodeURIComponent(uid)}`)\r\n              if (r2.ok) {\r\n                const p2 = await r2.json()\r\n                const usr = p2?.user ?? p2\r\n                setCurrentUser(usr || null)\r\n                return\r\n              }\r\n            } catch (e) { /* ignore */ }\r\n            setCurrentUser(payload?.user || null)\r\n            return\r\n          }\r\n        }\r\n      } catch (e) {\r\n        // fallback to localStorage\r\n      }\r\n      try {\r\n        const raw = typeof window !== 'undefined' ? localStorage.getItem('user') : null\r\n        if (raw) {\r\n          const parsed = JSON.parse(raw)\r\n          if (parsed?.id) {\r\n            setCurrentUserId(parsed.id)\r\n            setCurrentUser(parsed)\r\n          }\r\n        }\r\n      } catch (e) {}\r\n    }\r\n    loadCurrentUser()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    async function fetchConversation() {\r\n      if (!receiverId) return\r\n      let userA = currentUserId\r\n      if (!userA) {\r\n        try {\r\n          const raw = typeof window !== 'undefined' ? localStorage.getItem(\"user\") : null\r\n          if (raw) {\r\n            const parsed = JSON.parse(raw)\r\n            if (parsed?.id) userA = parsed.id\r\n          }\r\n        } catch (e) {}\r\n      }\r\n      if (!userA) return\r\n\r\n      setLoadingMessages(true)\r\n      setError(null)\r\n      try {\r\n        const url = `/api/messages?operation=get-conversation&userA=${encodeURIComponent(userA)}&userB=${encodeURIComponent(receiverId)}`\r\n        const res = await fetch(url)\r\n        if (!res.ok) {\r\n          const payload = await res.json().catch(() => null)\r\n          setError(payload?.error || `Server returned ${res.status}`)\r\n          setMessages([])\r\n        } else {\r\n          const payload = await res.json()\r\n          const msgs = Array.isArray(payload?.messages) ? payload.messages : []\r\n          setMessages(msgs)\r\n          setTimeout(() => scrollToBottom(), 50)\r\n        }\r\n      } catch (err) {\r\n        setError(err.message || \"Failed to load conversation\")\r\n      } finally {\r\n        setLoadingMessages(false)\r\n      }\r\n    }\r\n    fetchConversation()\r\n  }, [currentUserId, receiverId])\r\n\r\n  useEffect(() => {\r\n    // cleanup on unmount\r\n    return () => {\r\n      try {\r\n        if (mediaRecorderRef.current && mediaRecorderRef.current.state !== \"inactive\") {\r\n          mediaRecorderRef.current.stop()\r\n        }\r\n      } catch (e) {}\r\n      try {\r\n        if (activeStreamRef.current) {\r\n          activeStreamRef.current.getTracks().forEach(t => t.stop())\r\n        }\r\n      } catch (e) {}\r\n      if (recordIntervalRef.current) {\r\n        clearInterval(recordIntervalRef.current)\r\n        recordIntervalRef.current = null\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  const scrollToBottom = () => {\r\n    try {\r\n      if (messagesEndRef.current) {\r\n        messagesEndRef.current.scrollIntoView({ behavior: \"smooth\", block: \"end\" })\r\n      }\r\n    } catch (e) {}\r\n  }\r\n\r\n  function formatElapsed(ms) {\r\n    const totalSec = Math.floor(ms / 1000)\r\n    const minutes = Math.floor(totalSec / 60).toString().padStart(2, '0')\r\n    const seconds = (totalSec % 60).toString().padStart(2, '0')\r\n    return `${minutes}:${seconds}`\r\n  }\r\n\r\n  // format seconds (used for audio playback times which are in seconds)\r\n  function formatSeconds(secs) {\r\n    const totalSec = Math.max(0, Math.floor(secs || 0))\r\n    const minutes = Math.floor(totalSec / 60).toString().padStart(2, '0')\r\n    const seconds = (totalSec % 60).toString().padStart(2, '0')\r\n    return `${minutes}:${seconds}`\r\n  }\r\n\r\n  async function uploadFile(file) {\r\n    try {\r\n      const fd = new FormData()\r\n      fd.append(\"file\", file)\r\n      const res = await fetch(\"/api/messages/upload\", { method: \"POST\", body: fd })\r\n      if (!res.ok) {\r\n        const body = await res.json().catch(() => null)\r\n        throw new Error(body?.error || `Upload failed (${res.status})`)\r\n      }\r\n      const payload = await res.json()\r\n      return payload?.file || null\r\n    } catch (err) {\r\n      console.error(\"uploadFile\", err)\r\n      throw err\r\n    }\r\n  }\r\n\r\n  async function handleFileSend(file, forcedType = null) {\r\n    if (!file) return\r\n    try {\r\n      const baseType = forcedType || (file.type ? (file.type.startsWith('audio/') ? 'audio' : (file.type.startsWith('image/') ? 'image' : 'file')) : 'file')\r\n      if (baseType === 'audio') setUploadingAudio(true)\r\n      const uploaded = await uploadFile(file)\r\n      if (!uploaded?.url) throw new Error(\"Upload did not return url\")\r\n      const senderIdFinal = currentUserId || (typeof window !== 'undefined' && JSON.parse(localStorage.getItem(\"user\") || \"{}\").id)\r\n      const payload = {\r\n        senderId: senderIdFinal,\r\n        receiverId,\r\n        text: \"\",\r\n        sentAt: new Date().toISOString(),\r\n        attachments: [{ type: baseType, url: uploaded.url, filename: uploaded.filename || file.name, size: uploaded.size, mimeType: uploaded.type || file.type }],\r\n      }\r\n      const r = await fetch(\"/api/messages\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(payload),\r\n      })\r\n      if (r.ok) {\r\n        const p = await r.json()\r\n        setMessages((m) => [...m, p?.message || payload])\r\n        setTimeout(() => scrollToBottom(), 50)\r\n      } else {\r\n        const p = await r.json().catch(() => null)\r\n        setError(p?.error || `Server returned ${r.status}`)\r\n      }\r\n    } catch (err) {\r\n      console.error(\"file send error\", err)\r\n      setError(err.message || \"File upload failed\")\r\n    } finally {\r\n      setUploadingAudio(false)\r\n    }\r\n  }\r\n\r\n  // Recording voice message with timer and upload as audio\r\n  async function startRecording() {\r\n    setError(null)\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true })\r\n      activeStreamRef.current = stream\r\n\r\n      const options = {}\r\n      if (typeof MediaRecorder !== 'undefined' && MediaRecorder.isTypeSupported) {\r\n        if (MediaRecorder.isTypeSupported('audio/webm;codecs=opus')) options.mimeType = 'audio/webm;codecs=opus'\r\n        else if (MediaRecorder.isTypeSupported('audio/ogg;codecs=opus')) options.mimeType = 'audio/ogg;codecs=opus'\r\n        else if (MediaRecorder.isTypeSupported('audio/mp4')) options.mimeType = 'audio/mp4'\r\n      }\r\n      const mediaRecorder = new MediaRecorder(stream, options)\r\n      recordedChunksRef.current = []\r\n\r\n      mediaRecorder.addEventListener(\"dataavailable\", (ev) => {\r\n        if (ev.data && ev.data.size > 0) recordedChunksRef.current.push(ev.data)\r\n      })\r\n\r\n      mediaRecorder.addEventListener(\"stop\", async () => {\r\n        try {\r\n          const mime = mediaRecorder.mimeType || (recordedChunksRef.current[0] && recordedChunksRef.current[0].type) || 'audio/webm'\r\n          const blob = new Blob(recordedChunksRef.current, { type: mime })\r\n          let ext = 'webm'\r\n          if (mime.includes('ogg')) ext = 'ogg'\r\n          else if (mime.includes('mp4') || mime.includes('mpeg')) ext = 'm4a'\r\n          const file = new File([blob], `voice-${Date.now()}.${ext}`, { type: mime })\r\n          await handleFileSend(file, \"audio\")\r\n        } catch (err) {\r\n          console.error(\"record stop error\", err)\r\n          setError(\"Recording failed.\")\r\n        } finally {\r\n          setRecording(false)\r\n          setRecordElapsedMs(0)\r\n          try { if (activeStreamRef.current) activeStreamRef.current.getTracks().forEach(t => t.stop()) } catch (e) {}\r\n          activeStreamRef.current = null\r\n          if (recordIntervalRef.current) { clearInterval(recordIntervalRef.current); recordIntervalRef.current = null }\r\n        }\r\n      })\r\n\r\n      mediaRecorderRef.current = mediaRecorder\r\n      mediaRecorder.start()\r\n      recordStartRef.current = Date.now()\r\n      setRecordElapsedMs(0)\r\n      if (recordIntervalRef.current) clearInterval(recordIntervalRef.current)\r\n      recordIntervalRef.current = setInterval(() => {\r\n        setRecordElapsedMs(Date.now() - recordStartRef.current)\r\n      }, 200)\r\n      setRecording(true)\r\n    } catch (err) {\r\n      console.error(\"startRecording error\", err)\r\n      setError(\"Could not start audio recording (permission denied or unsupported).\")\r\n      setRecording(false)\r\n    }\r\n  }\r\n\r\n  function stopRecording() {\r\n    try {\r\n      if (mediaRecorderRef.current && mediaRecorderRef.current.state !== \"inactive\") {\r\n        mediaRecorderRef.current.stop()\r\n      } else {\r\n        setRecording(false)\r\n        setRecordElapsedMs(0)\r\n        try { if (activeStreamRef.current) activeStreamRef.current.getTracks().forEach(t => t.stop()) } catch (e) {}\r\n        activeStreamRef.current = null\r\n        if (recordIntervalRef.current) { clearInterval(recordIntervalRef.current); recordIntervalRef.current = null }\r\n      }\r\n    } catch (e) {\r\n      console.error(\"stopRecording error\", e)\r\n    }\r\n  }\r\n\r\n  function onFileInputChange(e) {\r\n    const f = e.target.files && e.target.files[0]\r\n    if (f) {\r\n      const detected = f.type ? (f.type.startsWith('audio/') ? 'audio' : (f.type.startsWith('image/') ? 'image' : 'file')) : 'file'\r\n      handleFileSend(f, detected)\r\n    }\r\n    e.target.value = null\r\n  }\r\n\r\n  function openPreview(url, filename) {\r\n    setPreviewImageUrl(url)\r\n    setPreviewFilename(filename || null)\r\n  }\r\n\r\n  async function downloadFile(url, filename = 'file') {\r\n    try {\r\n      const a = document.createElement('a')\r\n      a.href = url\r\n      a.download = filename || ''\r\n      document.body.appendChild(a)\r\n      a.click()\r\n      a.remove()\r\n    } catch (e) {\r\n      try {\r\n        const res = await fetch(url)\r\n        const blob = await res.blob()\r\n        const blobUrl = URL.createObjectURL(blob)\r\n        const a = document.createElement('a')\r\n        a.href = blobUrl\r\n        a.download = filename || 'file'\r\n        document.body.appendChild(a)\r\n        a.click()\r\n        a.remove()\r\n        setTimeout(() => URL.revokeObjectURL(blobUrl), 1000)\r\n      } catch (err) {\r\n        console.error('download failed', err)\r\n        setError('Download failed')\r\n      }\r\n    }\r\n  }\r\n\r\n  // Restore handleSend (simple text send)\r\n  async function handleSend() {\r\n    if (!text || text.trim() === \"\") {\r\n      // avoid sending empty messages\r\n      setError(\"Can't send an empty message.\")\r\n      return\r\n    }\r\n    if (!receiverId) { setError(\"No receiver selected.\"); return }\r\n    setSending(true)\r\n    setError(null)\r\n\r\n    const sentAt = new Date().toISOString()\r\n    let senderIdFinal = currentUserId\r\n    if (!senderIdFinal) {\r\n      try {\r\n        const raw = typeof window !== 'undefined' ? localStorage.getItem(\"user\") : null\r\n        if (raw) {\r\n          const parsed = JSON.parse(raw)\r\n          senderIdFinal = parsed?.id || null\r\n        }\r\n      } catch (e) {}\r\n    }\r\n    if (!senderIdFinal) {\r\n      setError(\"Unable to determine current user id. Please login again.\")\r\n      setSending(false)\r\n      return\r\n    }\r\n\r\n    const messagePayload = {\r\n      senderId: senderIdFinal,\r\n      receiverId,\r\n      text: text.trim() || \"\",\r\n      sentAt,\r\n      attachments: [],\r\n    }\r\n\r\n    try {\r\n      const res = await fetch(\"/api/messages\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(messagePayload),\r\n      })\r\n      if (res.ok) {\r\n        const payload = await res.json()\r\n        const saved = payload?.message || messagePayload\r\n        setMessages((m) => [...m, saved])\r\n        setText(\"\")\r\n        setTimeout(() => scrollToBottom(), 50)\r\n      } else {\r\n        const payload = await res.json().catch(() => null)\r\n        setError(payload?.error || `Server returned ${res.status}`)\r\n      }\r\n    } catch (err) {\r\n      console.error(\"send message error\", err)\r\n      setError(\"Failed to send message\")\r\n    } finally {\r\n      setSending(false)\r\n    }\r\n  }\r\n\r\n  // Compact WhatsApp-like audio UI used inside message bubbles.\r\n  function VoiceBubble({ src, filename }) {\r\n    const audioRef = useRef(null)\r\n    const progressRef = useRef(null)\r\n    const [duration, setDuration] = useState(0)\r\n    const [current, setCurrent] = useState(0)\r\n    const [playing, setPlaying] = useState(false)\r\n    const [muted, setMuted] = useState(false)\r\n    const draggingRef = useRef(false)\r\n\r\n    // menu + playback speed state\r\n    const [menuAnchor, setMenuAnchor] = useState(null)\r\n    const [playbackSpeed, setPlaybackSpeed] = useState(1.0)\r\n    const speeds = [0.5, 0.75, 1, 1.25, 1.5, 2]\r\n\r\n    const openMenu = (e) => setMenuAnchor(e.currentTarget)\r\n    const closeMenu = () => setMenuAnchor(null)\r\n    const onSelectSpeed = (s) => { setPlaybackSpeed(s); closeMenu() }\r\n    const onDownload = () => { closeMenu(); downloadFile(src, filename || `audio-${Date.now()}.webm`) }\r\n\r\n    useEffect(() => {\r\n      const a = new Audio(src)\r\n      a.preload = 'metadata'\r\n      audioRef.current = a\r\n      a.playbackRate = playbackSpeed\r\n      const onLoaded = () => setDuration(a.duration || 0)\r\n      const onTime = () => { if (!draggingRef.current) setCurrent(a.currentTime) }\r\n      const onEnd = () => { setPlaying(false); setCurrent(a.duration || 0) }\r\n      a.addEventListener('loadedmetadata', onLoaded)\r\n      a.addEventListener('timeupdate', onTime)\r\n      a.addEventListener('ended', onEnd)\r\n      return () => {\r\n        try { a.pause(); a.removeEventListener('loadedmetadata', onLoaded); a.removeEventListener('timeupdate', onTime); a.removeEventListener('ended', onEnd) } catch (e) {}\r\n      }\r\n    }, [src])\r\n\r\n    useEffect(() => { if (audioRef.current) audioRef.current.playbackRate = playbackSpeed }, [playbackSpeed])\r\n\r\n    const togglePlay = useCallback(async () => {\r\n      if (!audioRef.current) return\r\n      try {\r\n        audioRef.current.playbackRate = playbackSpeed\r\n        if (playing) { audioRef.current.pause(); setPlaying(false) } else { await audioRef.current.play(); setPlaying(true) }\r\n      } catch (e) { console.error(\"play error\", e); setError(\"Playback failed.\") }\r\n    }, [playing, playbackSpeed])\r\n\r\n    const toggleMute = () => { if (!audioRef.current) return; audioRef.current.muted = !audioRef.current.muted; setMuted(audioRef.current.muted) }\r\n\r\n    const getClientX = (e) => (e.touches && e.touches[0]) ? e.touches[0].clientX : e.clientX\r\n\r\n    const onProgressClick = (e) => {\r\n      if (!audioRef.current || !progressRef.current) return\r\n      const rect = progressRef.current.getBoundingClientRect()\r\n      const x = (getClientX(e) - rect.left)\r\n      const ratio = Math.max(0, Math.min(1, x / rect.width))\r\n      const newTime = ratio * (duration || 0)\r\n      audioRef.current.currentTime = newTime\r\n      setCurrent(newTime)\r\n    }\r\n\r\n    const onDragStart = (e) => { draggingRef.current = true; e.preventDefault() }\r\n    const onDragMove = (e) => {\r\n      if (!draggingRef.current || !progressRef.current) return\r\n      const clientX = getClientX(e)\r\n      const rect = progressRef.current.getBoundingClientRect()\r\n      const x = (clientX - rect.left)\r\n      const ratio = Math.max(0, Math.min(1, x / rect.width))\r\n      const newTime = ratio * (duration || 0)\r\n      setCurrent(newTime)\r\n    }\r\n    const onDragEnd = (e) => {\r\n      if (!draggingRef.current || !progressRef.current || !audioRef.current) { draggingRef.current = false; return }\r\n      const clientX = getClientX(e)\r\n      const rect = progressRef.current.getBoundingClientRect()\r\n      const x = (clientX - rect.left)\r\n      const ratio = Math.max(0, Math.min(1, x / rect.width))\r\n      const newTime = ratio * (duration || 0)\r\n      audioRef.current.currentTime = newTime\r\n      setCurrent(newTime)\r\n      draggingRef.current = false\r\n    }\r\n\r\n    const progressPct = duration ? Math.min(100, Math.max(0, (current / duration) * 100)) : 0\r\n\r\n    return (\r\n      <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-start', width: '100%' }}>\r\n        <Box\r\n          sx={{\r\n            bgcolor: '#dcf8c6',\r\n            borderRadius: '18px',\r\n            px: 1.25,\r\n            py: 0.75,\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: 1,\r\n            minWidth: 260,\r\n            maxWidth: { xs: '95vw', sm: 520 },\r\n            boxShadow: '0 1px 0 rgba(0,0,0,0.06)'\r\n          }}\r\n        >\r\n          <IconButton size=\"medium\" onClick={togglePlay} sx={{ p: 0.5 }}>\r\n            {playing ? <PauseIcon fontSize=\"medium\" /> : <PlayArrowIcon fontSize=\"medium\" />}\r\n          </IconButton>\r\n\r\n          {/* visible indicator */}\r\n          <Box sx={{ width: 10, height: 10, bgcolor: '#000', borderRadius: '50%' }} />\r\n\r\n          {/* larger progress bar with draggable knob */}\r\n          <Box\r\n            ref={progressRef}\r\n            onClick={onProgressClick}\r\n            onMouseDown={onDragStart}\r\n            onMouseMove={(e) => { if (draggingRef.current) onDragMove(e) }}\r\n            onMouseUp={onDragEnd}\r\n            onTouchStart={onDragStart}\r\n            onTouchMove={onDragMove}\r\n            onTouchEnd={onDragEnd}\r\n            sx={{\r\n              height: 10,\r\n              bgcolor: 'rgba(0,0,0,0.06)',\r\n              borderRadius: 6,\r\n              flex: 1,\r\n              position: 'relative',\r\n              cursor: 'pointer',\r\n              overflow: 'visible'\r\n            }}\r\n          >\r\n            <Box sx={{ position: 'absolute', left: 0, top: 0, bottom: 0, width: `${progressPct}%`, bgcolor: 'rgba(0,0,0,0.38)', transition: 'width 100ms linear', borderRadius: 6 }} />\r\n            {/* draggable knob */}\r\n            <Box\r\n              onMouseDown={onDragStart}\r\n              onTouchStart={onDragStart}\r\n              onMouseMove={(e) => { if (draggingRef.current) onDragMove(e) }}\r\n              onTouchMove={onDragMove}\r\n              onMouseUp={onDragEnd}\r\n              onTouchEnd={onDragEnd}\r\n              sx={{\r\n                position: 'absolute',\r\n                left: `${progressPct}%`,\r\n                top: '50%',\r\n                transform: 'translate(-50%, -50%)',\r\n                width: 14,\r\n                height: 14,\r\n                bgcolor: '#fff',\r\n                border: '2px solid rgba(0,0,0,0.4)',\r\n                borderRadius: '50%',\r\n                boxShadow: '0 1px 2px rgba(0,0,0,0.2)',\r\n                touchAction: 'none'\r\n              }}\r\n            />\r\n          </Box>\r\n\r\n          <IconButton size=\"small\" onClick={toggleMute} sx={{ p: 0.5 }}>\r\n            <VolumeUpIcon fontSize=\"small\" />\r\n          </IconButton>\r\n\r\n          {/* menu: playback speed and download */}\r\n          <IconButton size=\"small\" sx={{ p: 0.5 }} onClick={openMenu} aria-controls={menuAnchor ? 'voice-menu' : undefined} aria-haspopup=\"true\">\r\n            <MoreVertIcon fontSize=\"small\" />\r\n          </IconButton>\r\n          <Menu id=\"voice-menu\" anchorEl={menuAnchor} open={Boolean(menuAnchor)} onClose={closeMenu}>\r\n            {speeds.map((s) => (\r\n              <MenuItem key={s} selected={s === playbackSpeed} onClick={() => onSelectSpeed(s)}>\r\n                <ListItemText>{`${s}x`}</ListItemText>\r\n              </MenuItem>\r\n            ))}\r\n            <MenuItem onClick={onDownload}>\r\n              <ListItemIcon><DownloadIcon fontSize=\"small\" /></ListItemIcon>\r\n              <ListItemText>Download</ListItemText>\r\n            </MenuItem>\r\n          </Menu>\r\n\r\n          <Box sx={{ ml: 0.5 }}>\r\n            <Typography variant=\"caption\" sx={{ fontSize: 12 }}>{playbackSpeed}x</Typography>\r\n          </Box>\r\n        </Box>\r\n\r\n        {/* timestamp under bubble: current / total (seconds -> mm:ss) */}\r\n        <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 0.5 }}>\r\n          {formatSeconds(current)} / {formatSeconds(duration)}\r\n        </Typography>\r\n      </Box>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"md\" sx={{ display: \"flex\", flexDirection: \"column\", height: \"80vh\", p: 0 }}>\r\n      <Box sx={{ p: 2, borderBottom: \"1px solid #eee\" }}>\r\n        <Typography variant=\"h6\">Chat</Typography>\r\n        <Typography variant=\"body2\" color=\"text.secondary\">{receiver ? (receiver.pseudo || receiver.firstName) : \"Select a user\"}</Typography>\r\n      </Box>\r\n\r\n      {/* Messages area - grows and scrolls */}\r\n      <Box sx={{ flex: 1, overflowY: \"auto\", p: 2, bgcolor: \"#fafafa\" }}>\r\n        <List>\r\n          {messages.map((m, idx) => {\r\n            const isMe = String(m.senderId) === String(currentUserId)\r\n            return (\r\n              <ListItem key={m._id || m.id || idx} sx={{ display: \"flex\", flexDirection: \"column\", alignItems: isMe ? \"flex-end\" : \"flex-start\" }}>\r\n                <Box sx={{ bgcolor: isMe ? \"#d1ffd6\" : \"#fff\", p: 1, borderRadius: 1, maxWidth: \"80%\" }}>\r\n                  {m.text ? <Typography variant=\"body1\">{m.text}</Typography> : null}\r\n                  {/* render attachments */}\r\n                  {Array.isArray(m.attachments) && m.attachments.map((a, i) => {\r\n                    if (a.type === \"image\") {\r\n                      return (\r\n                        <Box key={i} sx={{ mt: 1 }}>\r\n                          <img\r\n                            src={a.url}\r\n                            alt={a.filename || \"image\"}\r\n                            style={{ maxWidth: \"240px\", borderRadius: 6, cursor: \"pointer\" }}\r\n                            onClick={() => openPreview(a.url, a.filename)}\r\n                          />\r\n                        </Box>\r\n                      )\r\n                    }\r\n                    if (a.type === \"audio\") {\r\n                      // use the compact WhatsApp-like voice UI\r\n                      return <Box key={i} sx={{ mt: 1 }}><VoiceBubble src={a.url} filename={a.filename} /></Box>\r\n                    }\r\n                    // fallback: show link with download\r\n                    return <Box key={i} sx={{ mt: 1 }}><a href={a.url} target=\"_blank\" rel=\"noreferrer\" onClick={(ev)=>{ev.preventDefault(); downloadFile(a.url, a.filename)}}>{a.filename || a.url}</a></Box>\r\n                  })}\r\n                  <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: \"block\", mt: 0.5 }}>\r\n                    {m.sentAt ? new Date(m.sentAt).toLocaleString() : \"\"}\r\n                  </Typography>\r\n                </Box>\r\n              </ListItem>\r\n            )\r\n          })}\r\n        </List>\r\n        <div ref={messagesEndRef} />\r\n      </Box>\r\n\r\n      {/* Preview overlay */}\r\n      {previewImageUrl ? (\r\n        <Box\r\n          sx={{\r\n            position: \"fixed\",\r\n            inset: 0,\r\n            bgcolor: \"rgba(0,0,0,0.6)\",\r\n            display: \"flex\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            zIndex: 9999,\r\n            p: 2\r\n          }}\r\n          onClick={() => { setPreviewImageUrl(null); setPreviewFilename(null) }}\r\n        >\r\n          <Box sx={{ bgcolor: \"#fff\", borderRadius: 2, p: 1, maxWidth: \"95%\", maxHeight: \"95%\" }} onClick={(e)=>e.stopPropagation()}>\r\n            <img src={previewImageUrl} alt={previewFilename || \"preview\"} style={{ maxWidth: \"100%\", maxHeight: \"80vh\", display: \"block\", marginBottom: 8 }} />\r\n            <Box sx={{ display: \"flex\", gap: 1, justifyContent: \"flex-end\" }}>\r\n              <Button variant=\"outlined\" onClick={() => downloadFile(previewImageUrl, previewFilename || 'image')}>Download</Button>\r\n              <Button variant=\"contained\" onClick={() => { setPreviewImageUrl(null); setPreviewFilename(null) }}>Close</Button>\r\n            </Box>\r\n          </Box>\r\n        </Box>\r\n      ) : null}\r\n\r\n      {/* Composer fixed to bottom (old UI look) */}\r\n      <Box sx={{ borderTop: \"1px solid #eee\", p: 1, display: \"flex\", gap: 1, alignItems: \"center\" }}>\r\n        <input type=\"file\" accept=\"image/*,audio/*\" ref={fileInputRef} style={{ display: \"none\" }} onChange={onFileInputChange} />\r\n        <IconButton onClick={() => fileInputRef.current && fileInputRef.current.click()} title=\"Attach photo or audio\">\r\n          <ImageIcon />\r\n        </IconButton>\r\n\r\n        <IconButton onClick={() => { recording ? stopRecording() : startRecording() }} color={recording ? \"error\" : \"default\"} title={recording ? \"Stop recording\" : \"Record voice\"}>\r\n          {recording ? <StopIcon /> : <MicIcon />}\r\n        </IconButton>\r\n\r\n        {/* show recording duration when recording */}\r\n        <Box sx={{ minWidth: 56 }}>\r\n          {recording ? <Typography variant=\"caption\" color=\"error\">{formatElapsed(recordElapsedMs)}</Typography> : null}\r\n        </Box>\r\n\r\n        <TextField\r\n          placeholder=\"Type a message...\"\r\n          value={text}\r\n          onChange={(e) => setText(e.target.value)}\r\n          fullWidth\r\n          size=\"small\"\r\n          onKeyDown={(e) => { if (e.key === \"Enter\" && !e.shiftKey) { e.preventDefault(); handleSend() } }}\r\n        />\r\n\r\n        <Button variant=\"contained\" onClick={handleSend} disabled={sending}>\r\n          Send\r\n        </Button>\r\n      </Box>\r\n    </Container>\r\n  )\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}