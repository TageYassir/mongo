{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Saas_MongoDB/mongo/app/uis/crypto/layout.js"],"sourcesContent":["'use client'\r\n\r\nimport { LocationOn as LocationOnIcon, MessageOutlined, PeopleOutline, CurrencyBitcoin, HomeOutlined, AccountCircle } from \"@mui/icons-material\";\r\nimport { AppBar, Box, Button, IconButton, Stack, Toolbar, Typography, Paper, BottomNavigation, BottomNavigationAction, Badge, Menu, MenuItem } from \"@mui/material\";\r\nimport NotificationsIcon from '@mui/icons-material/Notifications';\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useState, useEffect, useCallback } from \"react\";\r\n\r\nexport default function RootLayout({ children }) {\r\n  const router = useRouter();\r\n\r\n  // Notifications / invitations state (improved)\r\n  const [anchorEl, setAnchorEl] = useState(null)\r\n  const [invitations, setInvitations] = useState([])\r\n  const [currentUserId, setCurrentUserId] = useState(null)\r\n  const [loading, setLoading] = useState(true)\r\n  const [processingId, setProcessingId] = useState(null)\r\n  const [value, setValue] = useState(0);\r\n\r\n  // ---------------------------------------------------------------------------\r\n  // Helpers: resolve current user id from server/local state\r\n  // ---------------------------------------------------------------------------\r\n  const resolveCurrentUserId = async () => {\r\n    try {\r\n      const res = await fetch('/api/auth/me')\r\n      if (res.ok) {\r\n        const payload = await res.json().catch(() => null)\r\n        const id = payload?.user?._id || payload?.user?.id || payload?.id || null\r\n        if (id) return id\r\n      }\r\n    } catch (e) {}\r\n    try {\r\n      const res2 = await fetch('/api/users?operation=get-current')\r\n      if (res2.ok) {\r\n        const p2 = await res2.json().catch(() => null)\r\n        const id2 = p2?.user?._id || p2?.user?.id || p2?.id || null\r\n        if (id2) return id2\r\n      }\r\n    } catch (e) {}\r\n    try {\r\n      if (typeof window !== 'undefined') {\r\n        const raw = localStorage.getItem('user')\r\n        if (raw) {\r\n          const parsed = JSON.parse(raw)\r\n          const lid = parsed?.id || parsed?._id || null\r\n          if (lid) return lid\r\n        }\r\n        const uid = localStorage.getItem('userId')\r\n        if (uid) return uid\r\n      }\r\n    } catch (e) {}\r\n    return null\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  // Invitations\r\n  // ---------------------------------------------------------------------------\r\n  const fetchInvitations = useCallback(async (uid) => {\r\n    if (!uid) return setInvitations([])\r\n    try {\r\n      const invRes = await fetch(`/api/friends?operation=get-invitations&userId=${encodeURIComponent(uid)}`)\r\n      if (!invRes.ok) {\r\n        const body = await invRes.json().catch(() => null)\r\n        console.warn('Failed to fetch invitations', body)\r\n        setInvitations([])\r\n        return\r\n      }\r\n      const payload = await invRes.json().catch(() => null)\r\n      setInvitations(payload?.invitations || [])\r\n    } catch (e) {\r\n      console.warn('fetchInvitations error', e)\r\n      setInvitations([])\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    let mounted = true\r\n    const boot = async () => {\r\n      setLoading(true)\r\n      const me = await resolveCurrentUserId()\r\n      if (!mounted) return\r\n      setCurrentUserId(me)\r\n      if (me) await fetchInvitations(me)\r\n      setLoading(false)\r\n    }\r\n    boot()\r\n    return () => { mounted = false }\r\n  }, [fetchInvitations])\r\n\r\n  // re-fetch when other parts of the app dispatch this event\r\n  useEffect(() => {\r\n    const handler = (e) => {\r\n      try {\r\n        if (currentUserId) fetchInvitations(currentUserId)\r\n      } catch (err) {\r\n        console.warn('friend-request-changed handler error', err)\r\n      }\r\n    }\r\n    window.addEventListener('friend-request-changed', handler)\r\n    return () => window.removeEventListener('friend-request-changed', handler)\r\n  }, [currentUserId, fetchInvitations])\r\n\r\n  const openMenu = (e) => setAnchorEl(e.currentTarget)\r\n  const closeMenu = () => setAnchorEl(null)\r\n\r\n  const respond = async (requestId, action) => {\r\n    setProcessingId(requestId)\r\n    try {\r\n      const res = await fetch('/api/friends', {\r\n        method: 'PATCH',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ requestId, action }),\r\n      })\r\n      const payload = await res.json().catch(() => null)\r\n      if (!res.ok) throw new Error(payload?.error || 'Failed to update invitation')\r\n      setInvitations((prev) => prev.filter(i => String(i._id) !== String(requestId)))\r\n      try { window.dispatchEvent(new CustomEvent('friend-request-changed', { detail: { action, requestId } })) } catch (e) {}\r\n    } catch (err) {\r\n      alert(err.message || 'Failed to update invitation')\r\n    } finally {\r\n      setProcessingId(null)\r\n    }\r\n  }\r\n\r\n  // navigation helper\r\n  function loadScreen(event, screenURL) {\r\n    event?.preventDefault?.();\r\n    router.push(screenURL);\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  // Wallet disconnect helper (attempts to disconnect common providers + clear cache)\r\n  // ---------------------------------------------------------------------------\r\n  const signOutWallet = async () => {\r\n    try {\r\n      if (typeof window === 'undefined') return;\r\n      const eth = window.ethereum;\r\n      try { if (eth && typeof eth.disconnect === 'function') await eth.disconnect().catch(() => {}); } catch (e) {}\r\n      try { if (eth && typeof eth.close === 'function') await eth.close().catch(() => {}); } catch (e) {}\r\n      try { if (eth?.connector?.disconnect) await eth.connector.disconnect().catch(() => {}); } catch (e) {}\r\n      try { if (eth?.connector?.close) await eth.connector.close().catch(() => {}); } catch (e) {}\r\n      try { if (eth?.wc?.disconnect) await eth.wc.disconnect().catch(() => {}); } catch (e) {}\r\n    } catch (e) {\r\n      // ignore provider disconnect errors\r\n    }\r\n\r\n    // remove common cached keys used by WalletConnect / connectors / libs\r\n    try {\r\n      const cachedKeys = [\r\n        'walletconnect',\r\n        'WALLETCONNECT_DEEPLINK_CHOICE',\r\n        'WALLET_CONNECT_CACHED_PROVIDER',\r\n        'connectedWallet',\r\n        'connectorId',\r\n        'wagmi.wallet',\r\n        'web3auth',\r\n        'connectedWalletAddress'\r\n      ];\r\n      cachedKeys.forEach(k => { try { localStorage.removeItem(k); } catch (e) {} });\r\n    } catch (e) {}\r\n\r\n    try { window.dispatchEvent(new CustomEvent('wallet-disconnected')); } catch (e) {}\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  // local cleanup: remove wallet and tx keys from localStorage (all or for specific user)\r\n  // ---------------------------------------------------------------------------\r\n  function clearWalletLocalKeysForUser(optionalUserId) {\r\n    try {\r\n      if (typeof window === 'undefined') return;\r\n      for (let i = localStorage.length - 1; i >= 0; i--) {\r\n        const key = localStorage.key(i);\r\n        if (!key) continue;\r\n        if (optionalUserId) {\r\n          if (key.startsWith(`wallet:${optionalUserId}:`) || key.startsWith(`tx:${optionalUserId}`) || key.startsWith(`tx:`)) {\r\n            localStorage.removeItem(key);\r\n          }\r\n        } else {\r\n          if (key.startsWith('wallet:') || key.startsWith('tx:')) {\r\n            localStorage.removeItem(key);\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      // ignore storage errors\r\n    }\r\n  }\r\n\r\n  // ---------------------------------------------------------------------------\r\n  // Logout handler â€” improved to clear client-side wallet artifacts and broadcast logout\r\n  // ---------------------------------------------------------------------------\r\n  async function handleLogout() {\r\n    // discover current user id (same fallback as earlier)\r\n    let userId = null\r\n    try {\r\n      const raw = typeof window !== 'undefined' ? localStorage.getItem('user') : null\r\n      if (raw) {\r\n        const parsed = JSON.parse(raw)\r\n        userId = parsed?.id ?? parsed?._id ?? null\r\n      }\r\n      if (!userId) {\r\n        const uid = typeof window !== 'undefined' ? localStorage.getItem('userId') : null\r\n        if (uid) userId = uid\r\n      }\r\n    } catch (e) {\r\n      userId = null\r\n    }\r\n\r\n    // attempt server logout (best-effort)\r\n    try {\r\n      if (userId) {\r\n        await fetch('/api/users?operation=logout', {\r\n          method: 'POST',\r\n          headers: { 'Content-Type': 'application/json' },\r\n          body: JSON.stringify({ id: userId }),\r\n        }).catch(() => {})\r\n      } else {\r\n        await fetch('/api/auth/logout', { method: 'POST' }).catch(() => {})\r\n      }\r\n    } catch (e) {\r\n      // ignore\r\n    }\r\n\r\n    // disconnect wallet providers and clear related cached keys\r\n    try {\r\n      await signOutWallet()\r\n    } catch (e) {}\r\n\r\n    // Clear local app state and wallet artifacts\r\n    try {\r\n      localStorage.removeItem('user')\r\n    } catch (e) {}\r\n    try {\r\n      localStorage.removeItem('userId')\r\n    } catch (e) {}\r\n    try {\r\n      sessionStorage.setItem('justLoggedOut', '1')\r\n    } catch (e) {}\r\n\r\n    // Clear wallet and tx keys (prefer per-user, if available)\r\n    try {\r\n      if (userId) clearWalletLocalKeysForUser(userId)\r\n      else clearWalletLocalKeysForUser()\r\n    } catch (e) {}\r\n\r\n    // Broadcast logout so other tabs / components can react\r\n    try {\r\n      localStorage.setItem('user-logout-ts', String(Date.now()));\r\n      // also dispatch a custom event for in-tab listeners\r\n      try { window.dispatchEvent(new CustomEvent('user-logout', { detail: { userId } })) } catch (e) {}\r\n    } catch (e) {}\r\n\r\n    // Redirect to public area\r\n    try {\r\n      window.location.replace('/uis')\r\n    } catch (e) {\r\n      try { router.replace('/uis') } catch (er) {}\r\n    }\r\n  }\r\n\r\n  // Expose sign-out helper and listen for external logout broadcasts\r\n  useEffect(() => {\r\n    if (typeof window === 'undefined') return;\r\n\r\n    try { window.appSignOut = handleLogout } catch (e) {}\r\n\r\n    function onStorage(e) {\r\n      try {\r\n        if (!e) return;\r\n        // When another tab signals logout, clear local wallet and user keys locally\r\n        if (e.key === 'user-logout-ts') {\r\n          try { localStorage.removeItem('user'); } catch (er) {}\r\n          try { localStorage.removeItem('userId'); } catch (er) {}\r\n          clearWalletLocalKeysForUser();\r\n          setCurrentUserId(null);\r\n        }\r\n\r\n        // If userId was removed in another tab, clear wallet keys\r\n        if (e.key === 'userId') {\r\n          const oldVal = e.oldValue;\r\n          const newVal = e.newValue;\r\n          if (!newVal) {\r\n            // user cleared -> remove all wallet keys and reset currentUserId\r\n            clearWalletLocalKeysForUser();\r\n            setCurrentUserId(null);\r\n          } else if (oldVal && oldVal !== newVal) {\r\n            // user switched accounts in another tab: remove previous user's wallet keys and update currentUserId\r\n            try { clearWalletLocalKeysForUser(oldVal); } catch (er) {}\r\n            setCurrentUserId(newVal);\r\n            fetchInvitations(newVal);\r\n          } else if (!oldVal && newVal) {\r\n            // fresh login in another tab\r\n            setCurrentUserId(newVal);\r\n            fetchInvitations(newVal);\r\n          }\r\n        }\r\n\r\n        // If full user object changed (e.g. login), attempt to read and update currentUserId\r\n        if (e.key === 'user') {\r\n          try {\r\n            const parsed = e.newValue ? JSON.parse(e.newValue) : null;\r\n            const newId = parsed?.id || parsed?._id || null;\r\n            if (newId) {\r\n              setCurrentUserId(newId);\r\n              fetchInvitations(newId);\r\n            }\r\n            if (!e.newValue) {\r\n              // removed user\r\n              setCurrentUserId(null);\r\n            }\r\n          } catch (err) {}\r\n        }\r\n      } catch (err) {\r\n        // ignore\r\n      }\r\n    }\r\n\r\n    window.addEventListener('storage', onStorage)\r\n    return () => {\r\n      try { delete window.appSignOut } catch (e) {}\r\n      window.removeEventListener('storage', onStorage)\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [fetchInvitations])\r\n\r\n  // ---------------------------------------------------------------------------\r\n  // UI\r\n  // ---------------------------------------------------------------------------\r\n  return (\r\n    <Box sx={{ position: \"absolute\", top: 0, left: 0, bottom: 0, right: 0 }}>\r\n      <Box sx={{ position: \"relative\", top: 0, left: 0, bottom: 0, right: 0, display: 'flex', flexDirection: 'column', height: '100vh', width: '100%', overflow: 'hidden' }}>\r\n        {/* App Bar (minimal) */}\r\n        <Box>\r\n          <AppBar position=\"static\">\r\n            <Toolbar>\r\n              <Typography sx={{ fontSize: 18, fontWeight: 700, flexGrow: 1 }}>\r\n                Mini-Map\r\n              </Typography>\r\n              <Stack direction={\"row\"} spacing={1} alignItems=\"center\">\r\n                {/* Notifications */}\r\n                <Box>\r\n                  <IconButton onClick={openMenu} aria-label=\"notifications\" size=\"large\">\r\n                    <Badge badgeContent={invitations.length} color=\"error\">\r\n                      <NotificationsIcon />\r\n                    </Badge>\r\n                  </IconButton>\r\n\r\n                  <Menu anchorEl={anchorEl} open={Boolean(anchorEl)} onClose={closeMenu}>\r\n                    {loading && <MenuItem><Typography>Loading...</Typography></MenuItem>}\r\n                    {!loading && invitations.length === 0 && <MenuItem><Typography>No invitations</Typography></MenuItem>}\r\n                    {!loading && invitations.map((inv) => (\r\n                      <MenuItem key={inv._id} sx={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\r\n                        <Typography variant=\"body2\">{inv.senderId?.pseudo || `${inv.senderId?.firstName || ''} ${inv.senderId?.lastName || ''}`}</Typography>\r\n                        <Box sx={{ display: 'flex', gap: 1 }}>\r\n                          <Button size=\"small\" variant=\"contained\" onClick={() => respond(inv._id, 'accept')} disabled={processingId === inv._id}>Accept</Button>\r\n                          <Button size=\"small\" variant=\"outlined\" onClick={() => respond(inv._id, 'refuse')} disabled={processingId === inv._id}>Refuse</Button>\r\n                        </Box>\r\n                      </MenuItem>\r\n                    ))}\r\n                    <MenuItem>\r\n                      <Button size=\"small\" onClick={() => { closeMenu(); router.push('/uis/all-users') }}>Browse users</Button>\r\n                    </MenuItem>\r\n                  </Menu>\r\n                </Box>\r\n\r\n                <IconButton onClick={(e) => loadScreen(e, \"/uis/user-space/profile\")} size=\"large\" edge=\"end\" sx={{ ml: 1 }}>\r\n                  {/* tiny profile button remains optional */}\r\n                </IconButton>\r\n\r\n                {/* Logout placed in User Space app bar */}\r\n                <Button onClick={handleLogout} sx={{ color: 'error.main', textTransform: 'none', fontWeight: 600 }}>\r\n                  Logout\r\n                </Button>\r\n              </Stack>\r\n            </Toolbar>\r\n          </AppBar>\r\n        </Box>\r\n\r\n        {/* Children */}\r\n        <Box sx={{ flex: 1, overflowY: 'auto', p: 1, '&::-webkit-scrollbar': { display: 'none' }, scrollbarWidth: 'none' }}>\r\n          {children}\r\n        </Box>\r\n\r\n        {/* Bottom Navigation - Maps, Chat, Crypto (currency) and Community */}\r\n        <Box>\r\n          <Paper elevation={2}>\r\n            <BottomNavigation showLabels value={value} onChange={(event, newValue) => setValue(newValue)}>\r\n              <BottomNavigationAction onClick={(e) => loadScreen(e, \"/uis/user-space\")} label=\"Home\" icon={<HomeOutlined />} />\r\n              <BottomNavigationAction onClick={(e) => loadScreen(e, \"/uis/user-space/maps\")} label=\"Maps\" icon={<LocationOnIcon />} />\r\n              <BottomNavigationAction onClick={(e) => loadScreen(e, \"/uis/user-space/all-users\")} label=\"Community\" icon={<PeopleOutline />} />\r\n              <BottomNavigationAction onClick={(e) => loadScreen(e, \"/uis/user-space/chat\")} label=\"Chat\" icon={<MessageOutlined />} />\r\n              <BottomNavigationAction onClick={(e) => loadScreen(e, \"/uis/user-space/profile\")} label=\"Profile\" icon={<AccountCircle />} />\r\n              <BottomNavigationAction onClick={(e) => loadScreen(e, \"/uis/crypto\")} label=\"Crypto\" icon={<CurrencyBitcoin />} />\r\n            </BottomNavigation>\r\n          </Paper>\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}