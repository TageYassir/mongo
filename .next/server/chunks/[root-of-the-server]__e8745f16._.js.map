{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///D:/Saas_MongoDB/mongo/app/api/models.js"],"sourcesContent":["import mongoose from \"mongoose\";\n/**\n * Use an environment variable for the URI in production.\n * Fallback to the previous hard-coded URI for local dev if not set.\n */\nconst MONGODB_URI = process.env.MONGODB_URI || \"mongodb://localhost:27017/SocialDB\";\n\n/**\n * Global cache for the connection (useful for serverless / dev hot-reload).\n * We attach to global so multiple module reloads reuse the same connection.\n */\nlet cached = global.mongoose;\n\nif (!cached) {\n  cached = global.mongoose = { conn: null, promise: null };\n}\n\nasync function connectToDatabase() {\n  if (cached.conn) {\n    return cached.conn;\n  }\n\n  if (!cached.promise) {\n    // options can be tuned as needed\n    const opts = {\n      useNewUrlParser: true,\n      useUnifiedTopology: true,\n    };\n    cached.promise = mongoose.connect(MONGODB_URI, opts).then((mongooseInstance) => {\n      return mongooseInstance;\n    });\n  }\n\n  cached.conn = await cached.promise;\n  return cached.conn;\n}\n\n/**\n * Define schemas and models.\n * Use existing compiled models if present (mongoose.models).\n */\n\nconst locationSchema = new mongoose.Schema({ lat: Number, lng: Number }, { _id: false });\n\nconst userSchema = new mongoose.Schema({\n  firstName: { type: String, required: true },\n  lastName: { type: String, required: true },\n  gender: { type: String, required: true },\n  country: { type: String, required: true },\n  pseudo: { type: String, required: true },\n  email: { type: String, required: true, unique: true },\n  password: { type: String, required: true },\n  isOnline: { type: Boolean, default: false },\n  isValidated: { type: Boolean, default: false },\n  location: { type: locationSchema, default: null },\n  validationCode: { type: String, default: null },\n  recoveryCode: { type: String, default: null },\n}, { timestamps: true });\n\nconst postSchema = new mongoose.Schema({\n  content: { type: String, required: true },\n  dateTime: { type: Date, required: true, default: Date.now },\n  user: { type: mongoose.Schema.Types.ObjectId, ref: \"User\" },\n}, { timestamps: true });\n\n/**\n * Message schema - stores a single direct message between two users.\n * Fields:\n * - senderId: ObjectId (ref User)\n * - receiverId: ObjectId (ref User)\n * - text: String\n * - sentAt: Date\n */\nconst messageSchema = new mongoose.Schema({\n  senderId: { type: mongoose.Schema.Types.ObjectId, ref: \"User\", required: true },\n  receiverId: { type: mongoose.Schema.Types.ObjectId, ref: \"User\", required: true },\n  text: { type: String, required: true },\n  sentAt: { type: Date, required: true, default: Date.now },\n}, { timestamps: true });\n\n/**\n * Friend (friendship) schema - stores friend requests and accepted/refused relationships\n * Fields:\n * - senderId: ObjectId (ref User)  -> the user who initiated the request\n * - receiverId: ObjectId (ref User) -> the user receiving the request\n * - status: String -> 'pending' | 'accepted' | 'refused'\n */\nconst friendSchema = new mongoose.Schema({\n  senderId: { type: mongoose.Schema.Types.ObjectId, ref: \"User\", required: true },\n  receiverId: { type: mongoose.Schema.Types.ObjectId, ref: \"User\", required: true },\n  status: { type: String, enum: [\"pending\", \"accepted\", \"refused\"], default: \"pending\" },\n}, { timestamps: true });\n\n/**\n * Wallet schema - stores a walletId related to a user and its balance\n * Fields:\n * - walletId: String (unique wallet identifier)\n * - userId: ObjectId (ref User)\n * - balance: Number\n */\nconst walletSchema = new mongoose.Schema({\n  walletId: { type: String, required: true, unique: true },\n  userId: { type: mongoose.Schema.Types.ObjectId, ref: \"User\", required: true, unique: true },\n  balance: { type: Number, required: true, default: 0 },\n}, { timestamps: true });\n\n/**\n * Transaction schema - records transfers between wallets\n * Fields:\n * - senderWalletId: String (walletId of sender)\n * - receiverWalletId: String (walletId of receiver)\n * - amount: Number\n * - status: String (optional - pending/completed/failed)\n * - sentAt: Date\n */\nconst transactionSchema = new mongoose.Schema({\n  senderWalletId: { type: String, required: true },\n  receiverWalletId: { type: String, required: true },\n  amount: { type: Number, required: true },\n  status: { type: String, enum: [\"pending\", \"completed\", \"failed\"], default: \"completed\" },\n  sentAt: { type: Date, required: true, default: Date.now },\n}, { timestamps: true });\n\n/**\n * Avoid model overwrite in dev / hot-reload environments\n */\nconst User = mongoose.models.User || mongoose.model(\"User\", userSchema);\nconst Post = mongoose.models.Post || mongoose.model(\"Post\", postSchema);\nconst Message = mongoose.models.Message || mongoose.model(\"Message\", messageSchema);\nconst Friend = mongoose.models.Friend || mongoose.model(\"Friend\", friendSchema);\nconst Wallet = mongoose.models.Wallet || mongoose.model(\"Wallet\", walletSchema);\nconst Transaction = mongoose.models.Transaction || mongoose.model(\"Transaction\", transactionSchema);\n\n/**\n * Ensure connection is established when this module is imported.\n */\nconnectToDatabase().catch((err) => {\n  console.error(\"Failed to connect to MongoDB\", err);\n});\n\nexport { User, Post, Message, Friend, Wallet, Transaction, connectToDatabase };"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 324, "column": 0}, "map": {"version":3,"sources":["file:///D:/Saas_MongoDB/mongo/app/api/crypto/route.js"],"sourcesContent":["// contents of file\r\nconst express = require('express');\r\nconst router = express.Router();\r\nconst mongoose = require('mongoose');\r\n\r\nconst { Wallet, Transaction } = require('../models');\r\n\r\n// Helper to generate a short unique wallet id\r\nfunction generateWalletId() {\r\n  return (\r\n    'w_' +\r\n    Date.now().toString(36) +\r\n    Math.random()\r\n      .toString(16)\r\n      .slice(2, 8)\r\n  );\r\n}\r\n\r\nfunction jsonError(res, status, message) {\r\n  return res.status(status).json({ success: false, error: message });\r\n}\r\n\r\n// Create or return existing wallet for a userId\r\nrouter.post('/create-wallet', async (req, res) => {\r\n  try {\r\n    const { userId } = req.body || {};\r\n    if (!userId) return jsonError(res, 400, 'userId is required');\r\n\r\n    let wallet = await Wallet.findOne({ userId }).lean();\r\n    if (wallet) return res.json({ success: true, wallet });\r\n\r\n    const walletId = generateWalletId();\r\n    wallet = await Wallet.create({ walletId, userId, balance: 0 });\r\n    return res.json({ success: true, wallet });\r\n  } catch (err) {\r\n    console.error('create-wallet error', err);\r\n    return jsonError(res, 500, 'Internal server error');\r\n  }\r\n});\r\n\r\n// Get wallet by userId\r\nrouter.get('/user/:userId', async (req, res) => {\r\n  try {\r\n    const { userId } = req.params;\r\n    if (!userId) return jsonError(res, 400, 'userId is required');\r\n\r\n    const wallet = await Wallet.findOne({ userId }).lean();\r\n    if (!wallet) return jsonError(res, 404, 'Wallet not found');\r\n    return res.json({ success: true, wallet });\r\n  } catch (err) {\r\n    console.error('get wallet error', err);\r\n    return jsonError(res, 500, 'Internal server error');\r\n  }\r\n});\r\n\r\n// Add balance (system top-up). Records a transaction with senderWalletId='SYSTEM'\r\nrouter.post('/add-balance', async (req, res) => {\r\n  try {\r\n    const { walletId, amount } = req.body || {};\r\n    const amt = Number(amount);\r\n    if (!walletId) return jsonError(res, 400, 'walletId is required');\r\n    if (!amt || isNaN(amt) || amt <= 0) return jsonError(res, 400, 'amount must be a positive number');\r\n\r\n    // Atomic increment\r\n    const wallet = await Wallet.findOneAndUpdate(\r\n      { walletId },\r\n      { $inc: { balance: amt } },\r\n      { new: true }\r\n    ).lean();\r\n\r\n    if (!wallet) return jsonError(res, 404, 'Wallet not found');\r\n\r\n    // record top-up as coming from SYSTEM\r\n    await Transaction.create({\r\n      senderWalletId: 'SYSTEM',\r\n      receiverWalletId: walletId,\r\n      amount: amt,\r\n      status: 'completed',\r\n    });\r\n\r\n    return res.json({ success: true, wallet });\r\n  } catch (err) {\r\n    console.error('add-balance error', err);\r\n    return jsonError(res, 500, 'Internal server error');\r\n  }\r\n});\r\n\r\n// Transfer from one wallet to another\r\nrouter.post('/transfer', async (req, res) => {\r\n  const sessionSupported = typeof mongoose.startSession === 'function';\r\n  const { fromWalletId, toWalletId, amount } = req.body || {};\r\n  const amt = Number(amount);\r\n\r\n  if (!fromWalletId || !toWalletId) return jsonError(res, 400, 'fromWalletId and toWalletId are required');\r\n  if (fromWalletId === toWalletId) return jsonError(res, 400, 'fromWalletId and toWalletId must be different');\r\n  if (!amt || isNaN(amt) || amt <= 0) return jsonError(res, 400, 'amount must be a positive number');\r\n\r\n  // Use transactions if available\r\n  if (sessionSupported) {\r\n    const session = await mongoose.startSession();\r\n    session.startTransaction();\r\n    try {\r\n      // Decrement sender if sufficient funds\r\n      const sender = await Wallet.findOneAndUpdate(\r\n        { walletId: fromWalletId, balance: { $gte: amt } },\r\n        { $inc: { balance: -amt } },\r\n        { new: true, session }\r\n      );\r\n\r\n      if (!sender) {\r\n        await session.abortTransaction();\r\n        session.endSession();\r\n        return jsonError(res, 400, 'Insufficient funds or sender not found');\r\n      }\r\n\r\n      const receiver = await Wallet.findOneAndUpdate(\r\n        { walletId: toWalletId },\r\n        { $inc: { balance: amt } },\r\n        { new: true, session }\r\n      );\r\n\r\n      if (!receiver) {\r\n        await session.abortTransaction();\r\n        session.endSession();\r\n        return jsonError(res, 404, 'Receiver wallet not found');\r\n      }\r\n\r\n      await Transaction.create(\r\n        [\r\n          {\r\n            senderWalletId: fromWalletId,\r\n            receiverWalletId: toWalletId,\r\n            amount: amt,\r\n            status: 'completed',\r\n          },\r\n        ],\r\n        { session }\r\n      );\r\n\r\n      await session.commitTransaction();\r\n      session.endSession();\r\n\r\n      const updatedSender = await Wallet.findOne({ walletId: fromWalletId }).lean();\r\n      const updatedReceiver = await Wallet.findOne({ walletId: toWalletId }).lean();\r\n\r\n      return res.json({ success: true, sender: updatedSender, receiver: updatedReceiver });\r\n    } catch (err) {\r\n      await session.abortTransaction();\r\n      session.endSession();\r\n      console.error('transfer error (txn)', err);\r\n      return jsonError(res, 500, 'Transfer failed');\r\n    }\r\n  }\r\n\r\n  // Fallback (no transactions): use guarded atomic updates and basic rollback\r\n  try {\r\n    const sender = await Wallet.findOneAndUpdate(\r\n      { walletId: fromWalletId, balance: { $gte: amt } },\r\n      { $inc: { balance: -amt } },\r\n      { new: true }\r\n    );\r\n\r\n    if (!sender) return jsonError(res, 400, 'Insufficient funds or sender not found');\r\n\r\n    const receiver = await Wallet.findOneAndUpdate({ walletId: toWalletId }, { $inc: { balance: amt } }, { new: true });\r\n\r\n    if (!receiver) {\r\n      // attempt to rollback sender\r\n      await Wallet.findOneAndUpdate({ walletId: fromWalletId }, { $inc: { balance: amt } });\r\n      return jsonError(res, 404, 'Receiver wallet not found; rolled back');\r\n    }\r\n\r\n    await Transaction.create({\r\n      senderWalletId: fromWalletId,\r\n      receiverWalletId: toWalletId,\r\n      amount: amt,\r\n      status: 'completed',\r\n    });\r\n\r\n    const updatedSender = await Wallet.findOne({ walletId: fromWalletId }).lean();\r\n    const updatedReceiver = await Wallet.findOne({ walletId: toWalletId }).lean();\r\n\r\n    return res.json({ success: true, sender: updatedSender, receiver: updatedReceiver });\r\n  } catch (err) {\r\n    console.error('transfer error (fallback)', err);\r\n    return jsonError(res, 500, 'Transfer failed');\r\n  }\r\n});\r\n\r\n// List transactions for a walletId\r\nrouter.get('/transactions/:walletId', async (req, res) => {\r\n  try {\r\n    const { walletId } = req.params;\r\n    const limit = Math.min(100, Number(req.query.limit) || 20);\r\n\r\n    if (!walletId) return jsonError(res, 400, 'walletId is required');\r\n\r\n    const transactions = await Transaction.find({\r\n      $or: [{ senderWalletId: walletId }, { receiverWalletId: walletId }],\r\n    })\r\n      .sort({ createdAt: -1 })\r\n      .limit(limit)\r\n      .lean();\r\n\r\n    return res.json({ success: true, transactions });\r\n  } catch (err) {\r\n    console.error('transactions error', err);\r\n    return jsonError(res, 500, 'Internal server error');\r\n  }\r\n});\r\n\r\n// Stats for a walletId: balance, totalSent, totalReceived, txCount\r\nrouter.get('/stats/:walletId', async (req, res) => {\r\n  try {\r\n    const { walletId } = req.params;\r\n    if (!walletId) return jsonError(res, 400, 'walletId is required');\r\n\r\n    const wallet = await Wallet.findOne({ walletId }).lean();\r\n    if (!wallet) return jsonError(res, 404, 'Wallet not found');\r\n\r\n    // aggregate totals\r\n    const [sentAgg] = await Transaction.aggregate([\r\n      { $match: { senderWalletId: walletId } },\r\n      { $group: { _id: null, totalSent: { $sum: '$amount' }, count: { $sum: 1 } } },\r\n    ]);\r\n\r\n    const [recvAgg] = await Transaction.aggregate([\r\n      { $match: { receiverWalletId: walletId } },\r\n      { $group: { _id: null, totalReceived: { $sum: '$amount' }, count: { $sum: 1 } } },\r\n    ]);\r\n\r\n    const txCount =\r\n      (sentAgg && sentAgg.count ? sentAgg.count : 0) + (recvAgg && recvAgg.count ? recvAgg.count : 0);\r\n\r\n    return res.json({\r\n      success: true,\r\n      stats: {\r\n        balance: wallet.balance,\r\n        totalSent: (sentAgg && sentAgg.totalSent) || 0,\r\n        totalReceived: (recvAgg && recvAgg.totalReceived) || 0,\r\n        txCount,\r\n      },\r\n    });\r\n  } catch (err) {\r\n    console.error('stats error', err);\r\n    return jsonError(res, 500, 'Internal server error');\r\n  }\r\n});\r\n\r\nexport default router;"],"names":[],"mappings":"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","debugId":null}}]
}