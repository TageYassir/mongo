{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Saas_MongoDB/mongo/app/uis/crypto/page.js"],"sourcesContent":["'use client'\r\n\r\nimport React, { useState, useEffect, useRef } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\n// CryptoIndex â€” improved detection + robust transaction fetching.\r\n// This client component will attempt to detect a connected user but will also\r\n// fall back to fetching all transactions when no user is detected. It tries\r\n// a wide set of API paths and normalizes results for display.\r\nexport default function CryptoIndex() {\r\n  const [connectedUserId, setConnectedUserId] = useState(null);\r\n  const mountedRef = useRef(false);\r\n  const router = useRouter();\r\n\r\n  // detection helpers\r\n  const hasWindow = typeof window !== \"undefined\";\r\n  const hasDocument = typeof document !== \"undefined\";\r\n\r\n  function isBlockedUser(id) {\r\n    if (!id) return false;\r\n    try {\r\n      const s = String(id).trim();\r\n      return s === \"691735cf8c82afe3706c8db9\";\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  function getUserIdFromCookie() {\r\n    if (!hasDocument) return null;\r\n    try {\r\n      const m = document.cookie.match(/(?:^|;\\s*)userId=([^;]+)/);\r\n      return m ? decodeURIComponent(m[1]) : null;\r\n    } catch (e) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  function getUserIdFromWindow() {\r\n    if (!hasWindow) return null;\r\n    try {\r\n      if (window.__USER_ID__) return window.__USER_ID__;\r\n      if (window.__NEXT_DATA__) {\r\n        const nd = window.__NEXT_DATA__;\r\n        const maybe = nd.props?.pageProps?.user?.id || nd.props?.pageProps?.userId || nd.props?.pageProps?.user?._id;\r\n        if (maybe) return maybe;\r\n      }\r\n      if (window.app && window.app.currentUser) {\r\n        return window.app.currentUser.id || window.app.currentUser.userId || window.app.currentUser._id || null;\r\n      }\r\n    } catch (e) {\r\n      // ignore\r\n    }\r\n    return null;\r\n  }\r\n\r\n  function getUserIdFromStorage() {\r\n    if (!hasWindow) return null;\r\n    try {\r\n      const keys = [\"connectedUserId\", \"userId\", \"currentUserId\"];\r\n      for (const k of keys) {\r\n        try {\r\n          const raw = localStorage.getItem(k) || sessionStorage.getItem(k);\r\n          if (raw) return raw;\r\n        } catch (e) {}\r\n      }\r\n      try {\r\n        const rawUser = localStorage.getItem(\"user\") || sessionStorage.getItem(\"user\");\r\n        if (rawUser) {\r\n          const parsed = JSON.parse(rawUser);\r\n          return parsed?.id || parsed?._id || parsed?.userId || null;\r\n        }\r\n      } catch (e) {}\r\n      for (let i = 0; i < localStorage.length; i++) {\r\n        const key = localStorage.key(i);\r\n        if (!key) continue;\r\n        if (/user/i.test(key) || /auth/i.test(key)) {\r\n          try {\r\n            const raw = localStorage.getItem(key);\r\n            if (!raw) continue;\r\n            if (raw.trim().startsWith(\"{\")) {\r\n              const parsed = JSON.parse(raw);\r\n              const maybe = parsed?.id || parsed?._id || parsed?.userId;\r\n              if (maybe) return maybe;\r\n            } else if (raw.length > 5) {\r\n              return raw;\r\n            }\r\n          } catch (e) {}\r\n        }\r\n      }\r\n    } catch (e) {\r\n      // storage not available\r\n    }\r\n    return null;\r\n  }\r\n\r\n  async function fetchUserFromRoute() {\r\n    if (!hasWindow) return null;\r\n    const tries = [\"/api/auth/me\", \"/api/users?operation=get-current\", \"/api/users?operation=get-current-user\", \"/api/user\", \"/api/me\"];\r\n    for (const p of tries) {\r\n      try {\r\n        const res = await fetch(p, { credentials: \"same-origin\" });\r\n        if (!res.ok) continue;\r\n        const json = await res.json().catch(() => null);\r\n        const maybe = json?.user?._id || json?.user?.id || json?.id || json?.userId || null;\r\n        if (maybe) return maybe;\r\n      } catch (e) {}\r\n    }\r\n    return null;\r\n  }\r\n\r\n  // central detection function\r\n  async function detectConnectedUserId() {\r\n    const cookie = getUserIdFromCookie();\r\n    if (cookie) {\r\n      if (isBlockedUser(cookie)) return null;\r\n      return String(cookie);\r\n    }\r\n\r\n    const w = getUserIdFromWindow();\r\n    if (w) {\r\n      if (isBlockedUser(w)) return null;\r\n      return String(w);\r\n    }\r\n\r\n    const s = getUserIdFromStorage();\r\n    if (s) {\r\n      if (isBlockedUser(s)) return null;\r\n      return String(s);\r\n    }\r\n\r\n    try {\r\n      const fromApi = await fetchUserFromRoute();\r\n      if (fromApi) {\r\n        if (isBlockedUser(fromApi)) return null;\r\n        return String(fromApi);\r\n      }\r\n    } catch (e) {}\r\n\r\n    return null;\r\n  }\r\n\r\n  useEffect(() => {\r\n    mountedRef.current = true;\r\n    let canceled = false;\r\n\r\n    (async () => {\r\n      const id = await detectConnectedUserId();\r\n      if (canceled) return;\r\n      if (id && !isBlockedUser(id)) setConnectedUserId(String(id));\r\n      else setConnectedUserId(null);\r\n    })();\r\n\r\n    function onStorage(e) {\r\n      try {\r\n        if (!e) return;\r\n        if (e.key === \"connectedUserId\" || e.key === \"userId\" || e.key === \"user\" || e.key?.startsWith(\"auth\") || e.key === \"user-logout-ts\") {\r\n          setTimeout(async () => {\r\n            if (!mountedRef.current) return;\r\n            const id = await detectConnectedUserId();\r\n            if (id && !isBlockedUser(id)) setConnectedUserId(String(id));\r\n            else setConnectedUserId(null);\r\n          }, 120);\r\n        }\r\n      } catch (err) {}\r\n    }\r\n\r\n    try {\r\n      window.addEventListener(\"storage\", onStorage);\r\n    } catch (e) {}\r\n\r\n    return () => {\r\n      canceled = true;\r\n      mountedRef.current = false;\r\n      try {\r\n        window.removeEventListener(\"storage\", onStorage);\r\n      } catch (e) {}\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n\r\n  // new: mobile detection\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\") return;\r\n    const check = () => setIsMobile(window.innerWidth <= 640);\r\n    check();\r\n    window.addEventListener(\"resize\", check);\r\n    return () => window.removeEventListener(\"resize\", check);\r\n  }, []);\r\n\r\n  // Normalize server transaction to UI-friendly shape\r\n  function normalizeTransaction(t) {\r\n    const id = t.id || t._id || (t._id && String(t._id)) || null;\r\n    const sentAt = t.sentAt || t.sent_at || t.createdAt || t.created_at || t.date || t.timestamp || null;\r\n    const dateISO = sentAt ? new Date(sentAt).toISOString() : null;\r\n    const fromId = t.fromId || t.senderWalletId || t.sender || t.from || t.from_wallet || null;\r\n    const toId = t.toId || t.receiverWalletId || t.receiver || t.to || t.to_wallet || null;\r\n    const amount = typeof t.amount === \"number\" ? t.amount : Number(t.amount || 0);\r\n\r\n    return {\r\n      raw: t,\r\n      id,\r\n      date: dateISO,\r\n      fromId,\r\n      toId,\r\n      amount,\r\n      status: t.status || t.state || null,\r\n    };\r\n  }\r\n\r\n  // fetch and return normalized array\r\n  async function fetchAllTransactions(userId) {\r\n    async function tryFetchJson(path) {\r\n      try {\r\n        const res = await fetch(path, { credentials: \"same-origin\" });\r\n        if (!res.ok) {\r\n          // try to parse body for debugging messages but return null for data\r\n          try { await res.json().catch(() => null); } catch (_) {}\r\n          return null;\r\n        }\r\n        return await res.json().catch(() => null);\r\n      } catch (e) {\r\n        return null;\r\n      }\r\n    }\r\n\r\n    // Build candidate endpoints widely (covers common variants)\r\n    const candidates = [];\r\n\r\n    // If userId present, try endpoints that accept userId\r\n    if (userId) {\r\n      candidates.push(\r\n        `/api/crypto/transactions?userId=${encodeURIComponent(userId)}`,\r\n        `/api/crypto/transactions/${encodeURIComponent(userId)}`,\r\n        `/api/transactions?userId=${encodeURIComponent(userId)}`,\r\n        `/api/transactions/${encodeURIComponent(userId)}`,\r\n        `/api/wallets/transactions/${encodeURIComponent(userId)}`,\r\n        `/api/wallets/transactions?walletId=${encodeURIComponent(userId)}`,\r\n        `/api/transactions?walletId=${encodeURIComponent(userId)}`,\r\n        `/api/crypto?operation=get-transactions&userId=${encodeURIComponent(userId)}`\r\n      );\r\n    }\r\n\r\n    // Try wallet discovery first (many backends store transactions linked to wallets)\r\n    if (userId) {\r\n      const walletLookupCandidates = [\r\n        `/api/crypto/user/${encodeURIComponent(userId)}`,\r\n        `/api/crypto/wallets?userId=${encodeURIComponent(userId)}`,\r\n        `/api/wallets?userId=${encodeURIComponent(userId)}`,\r\n        `/api/wallets/user/${encodeURIComponent(userId)}`,\r\n        `/api/users/${encodeURIComponent(userId)}/wallets`,\r\n      ];\r\n      for (const p of walletLookupCandidates) {\r\n        const walletJson = await tryFetchJson(p);\r\n        if (!walletJson) continue;\r\n        const walletObj = walletJson?.wallet || (Array.isArray(walletJson) && walletJson[0]) || walletJson?.data || walletJson?.wallets || null;\r\n        const walletId = walletObj?.walletId || walletObj?._id || walletObj?.id || null;\r\n        if (walletId) {\r\n          // try transaction endpoints for that walletId\r\n          const txPaths = [\r\n            `/api/wallets/transactions/${encodeURIComponent(walletId)}`,\r\n            `/api/transactions/${encodeURIComponent(walletId)}`,\r\n            `/api/transactions?walletId=${encodeURIComponent(walletId)}`,\r\n            `/api/crypto/wallets/${encodeURIComponent(walletId)}/transactions`,\r\n            `/api/crypto/wallets/transactions/${encodeURIComponent(walletId)}`,\r\n            `/api/crypto/transactions/${encodeURIComponent(walletId)}`,\r\n          ];\r\n          for (const tp of txPaths) {\r\n            const txJson = await tryFetchJson(tp);\r\n            if (!txJson) continue;\r\n            const list = Array.isArray(txJson) ? txJson : txJson?.transactions || txJson?.data || txJson?.items || txJson?.transactionsData || null;\r\n            if (Array.isArray(list)) return list.map(normalizeTransaction);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // Generic candidates (global transactions or alternative endpoints)\r\n    candidates.push(\r\n      `/api/crypto/transactions`,\r\n      `/api/crypto?operation=get-transactions`,\r\n      `/api/crypto?operation=get-transactions&limit=100`,\r\n      `/api/transactions`,\r\n      `/api/txs`,\r\n      `/api/transactions/all`,\r\n      `/api/transactions?limit=100`\r\n    );\r\n\r\n    // Also include direct wallet-like candidates even when userId is not present\r\n    candidates.push(\r\n      `/api/wallets/transactions`,\r\n      `/api/wallets/transactions?limit=100`,\r\n      `/api/crypto`\r\n    );\r\n\r\n    // Walk candidate endpoints until we find an array\r\n    for (const p of candidates) {\r\n      const json = await tryFetchJson(p);\r\n      if (!json) continue;\r\n      const list = Array.isArray(json) ? json : json?.transactions || json?.data || json?.items || json?.txs || json?.rows || null;\r\n      if (Array.isArray(list)) {\r\n        return list.map(normalizeTransaction);\r\n      }\r\n      // Some backends return { success: true, data: [...] }\r\n      if (json && Array.isArray(json.data)) return json.data.map(normalizeTransaction);\r\n    }\r\n\r\n    // nothing found\r\n    return [];\r\n  }\r\n\r\n  useEffect(() => {\r\n    let canceled = false;\r\n    (async () => {\r\n      // we allow fetch even if connectedUserId is null (global transactions)\r\n      if (!mountedRef.current) mountedRef.current = true;\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const txs = await fetchAllTransactions(connectedUserId);\r\n        if (canceled) return;\r\n        setTransactions(txs);\r\n      } catch (err) {\r\n        if (!canceled) setError(\"Failed to load transactions\");\r\n        console.error(\"fetch transactions error:\", err);\r\n      } finally {\r\n        if (!canceled) setLoading(false);\r\n      }\r\n    })();\r\n    return () => { canceled = true; };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [connectedUserId]);\r\n\r\n  function refresh() {\r\n    (async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const txs = await fetchAllTransactions(connectedUserId);\r\n        setTransactions(txs);\r\n      } catch (e) {\r\n        setError(\"Failed to refresh transactions\");\r\n        console.error(\"refresh error:\", e);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    })();\r\n  }\r\n\r\n  function formatDate(iso) {\r\n    if (!iso) return \"-\";\r\n    try {\r\n      const d = new Date(iso);\r\n      return d.toLocaleString();\r\n    } catch (e) {\r\n      return iso;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <section style={{ padding: isMobile ? 16 : 24, fontFamily: \"Arial, sans-serif\", maxWidth: 900, margin: '0 auto', boxSizing: 'border-box' }}>\r\n      <h1 style={{ margin: 0, fontSize: isMobile ? 18 : 22 }}>Wallet Transactions</h1>\r\n      <p style={{ color: \"#666\", marginTop: 8, fontSize: isMobile ? 13 : 14 }}>\r\n        Showing transactions. The page will attempt many common API paths to locate transactions.\r\n      </p>\r\n\r\n      <div style={{ marginTop: 16, display: \"flex\", gap: 12, alignItems: \"center\", flexWrap: \"wrap\" }}>\r\n        <div style={{\r\n          marginLeft: isMobile ? 0 : \"auto\",\r\n          display: \"flex\",\r\n          gap: 8,\r\n          flexDirection: isMobile ? 'column' : 'row',\r\n          width: isMobile ? '100%' : 'auto'\r\n        }}>\r\n          <button\r\n            onClick={() => {\r\n              if (connectedUserId) {\r\n                router.push(`/uis/crypto/${encodeURIComponent(String(connectedUserId))}`);\r\n              } else {\r\n                router.push(`/uis/crypto/new`);\r\n              }\r\n            }}\r\n            style={{\r\n              padding: \"8px 12px\",\r\n              borderRadius: 6,\r\n              border: \"1px solid #1976d2\",\r\n              background: \"#1976d2\",\r\n              color: \"#fff\",\r\n              cursor: \"pointer\",\r\n              fontWeight: 600,\r\n              width: isMobile ? '100%' : 'auto'\r\n            }}\r\n            title={connectedUserId ? `Create transaction for ${connectedUserId}` : \"Create transaction\"}\r\n          >\r\n            Add Transaction\r\n          </button>\r\n\r\n          <button\r\n            onClick={refresh}\r\n            style={{\r\n              padding: \"8px 12px\",\r\n              borderRadius: 6,\r\n              border: \"1px solid #ddd\",\r\n              background: \"#fff\",\r\n              cursor: \"pointer\",\r\n              width: isMobile ? '100%' : 'auto'\r\n            }}\r\n            title=\"Refresh transactions\"\r\n          >\r\n            Refresh\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{ marginTop: 16, border: \"1px solid #eee\", padding: isMobile ? 10 : 12, borderRadius: 6 }}>\r\n        <div style={{ marginTop: 12 }}>\r\n          {loading ? (\r\n            <div style={{ color: \"#666\" }}>Loading transactions...</div>\r\n          ) : error ? (\r\n            <div style={{ color: \"red\" }}>{error}</div>\r\n          ) : transactions.length === 0 ? (\r\n            <div style={{ color: \"#777\" }}>No transactions available.</div>\r\n          ) : (\r\n            // responsive: table on desktop, stacked cards on mobile\r\n            isMobile ? (\r\n              <div style={{ display: 'flex', flexDirection: 'column', gap: 10 }}>\r\n                {transactions.map((t) => {\r\n                  const date = formatDate(t.date);\r\n                  const from = t.fromId || \"-\";\r\n                  const to = t.toId || \"-\";\r\n                  const amount = Number(t.amount || 0).toFixed(2);\r\n                  return (\r\n                    <div key={t.id || `${from}-${to}-${t.date}`} style={{ background: '#fff', padding: 10, borderRadius: 8, boxShadow: '0 0 0 1px #f3f3f3 inset' }}>\r\n                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', gap: 8 }}>\r\n                        <div style={{ minWidth: 0 }}>\r\n                          <div style={{ fontWeight: 700, fontSize: 14 }}>{amount} <span style={{ fontWeight: 500, color: '#666' }}>USD</span></div>\r\n                          <div style={{ fontSize: 13, color: '#444', marginTop: 6 }}>\r\n                            <div style={{ whiteSpace: 'nowrap', textOverflow: 'ellipsis', overflow: 'hidden' }}>From: {from}</div>\r\n                            <div style={{ whiteSpace: 'nowrap', textOverflow: 'ellipsis', overflow: 'hidden' }}>To: {to}</div>\r\n                          </div>\r\n                        </div>\r\n                        <div style={{ textAlign: 'right', minWidth: 92 }}>\r\n                          <div style={{ fontSize: 12, color: t.status === 'ok' ? '#064' : '#a33', fontWeight: 600 }}>{t.status || '-'}</div>\r\n                          <div style={{ fontSize: 11, color: '#888', marginTop: 6 }}>{date}</div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            ) : (\r\n              <div style={{ overflowX: 'auto' }}>\r\n                <table style={{ width: \"100%\", borderCollapse: \"collapse\", fontSize: 14 }}>\r\n                  <thead>\r\n                    <tr style={{ textAlign: \"left\", borderBottom: \"1px solid #eee\" }}>\r\n                      <th style={{ padding: \"8px 6px\" }}>Date</th>\r\n                      <th style={{ padding: \"8px 6px\" }}>From Wallet</th>\r\n                      <th style={{ padding: \"8px 6px\" }}>To Wallet</th>\r\n                      <th style={{ padding: \"8px 6px\" }}>Amount</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {transactions.map((t) => (\r\n                      <tr key={t.id || `${t.fromId}-${t.toId}-${t.date}`} style={{ borderBottom: \"1px solid #fafafa\" }}>\r\n                        <td style={{ padding: \"8px 6px\", color: \"#555\" }}>{formatDate(t.date)}</td>\r\n                        <td style={{ padding: \"8px 6px\" }}>{t.fromId || \"-\"}</td>\r\n                        <td style={{ padding: \"8px 6px\" }}>{t.toId || \"-\"}</td>\r\n                        <td style={{ padding: \"8px 6px\", fontWeight: 600 }}>{Number(t.amount || 0).toFixed(2)}</td>\r\n                      </tr>\r\n                    ))}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            )\r\n          )}\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}